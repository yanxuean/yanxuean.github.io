---
layout: post
title: Clean Architecture
categories: [software engineering]
description: Clean Architecture
keywords: Architecture
---

# Clean Architecture
陈浩的一个观点： 各种范式或微服务架构都是为了解决一个问题：分离控制和逻辑。
控制是指：对程序流转的与业务逻辑无关的代码或系统的控制（如多线程，异步，服务发现，部署，弹缩等）。
逻辑是指：实实在在的业务逻辑，是解决用户问题的逻辑。
控制和逻辑构成了整体的软件复杂度，有效的分离控制和逻辑会让你的系统得到最大的简化。
区分：简单vs简陋，平衡vs妥协，迭代vs半成品

本书的结构：编程范式，设计原则，软件架构


## 架构的定义
架构就是“用最小的人力成本来满足构建和维护系统需求”的设计行为

软件架构的规则就是排列组合代码块的规则

好的架构可以节省软件项目构建与维护的人力成本。用最小的成本，最大程度满足功能性和灵活性的要求


## 1.设计和架构究竟是什么
两个是同一个事情，没有区别。
架构这个词一般用在更高级的讨论中，这种讨论一般不考虑底层实现细节。
设计，往往用来指代具体的系统底层组织结构和实现的细节。

例子：建筑设计图既包括大的东西（外形，布局），还包括水电管道等细节，两者不可分割，没有清晰的分界线。

### 目标：用最小的人力成本来满足构建和维护该系统的需求。
其优劣用它满足用户需求所需的成本来衡量。

差系统特点：生产力下降，成本上升，无解

不要太自信。从开始就低估好的，良好设计的，整洁的代码的重要性。

例子：要想跑得快，先要跑的稳


## 2.两个价值维度
行为价值：实现客户要求的功能。
架构价值：soft 灵活性，ware 产品。

变更实施的难度应该和变更的范畴（scope）成等比关系，与变更的具体形状（shape）无关。   ---- shape是啥？

架构》行为： 因为不能变更的系统没价值。只有架构好的系统才能变更。


紧急重要四象限。 行为都是紧急的，架构都是重要的。

业务部门（需求方）没有能力评估系统架构的重要程度，是研发人员自己的职责。守护系统架构，守护可维护性



## 7. SRP 单一职责原则
任何一个软件模块都应该只对某一类行为者actor负责。
软件模块：指一组紧密相关的函数和数据结构。

例子没看特别明白。

## 8.OCP开闭原则
设计良好的软件应该易于扩展，同时抗拒修改（add，not modify）。
对旧代码的修改尽量降低（先通过SRP分组，在通过DIP调整分组之间的依赖关系。）
可根据相关函数被修改的原因，修改的方式，修改的时间来进行分组隔离，并将这些分组整理成组件结构，使高阶组件不依赖低阶组件。

将系统划分为一系列组件，并将组件间的依赖关系按层次结构进行组织，使高阶组件不会因低阶组件被修改而受到影响。

用接口反转依赖关系。
接口也可用于信息隐藏



